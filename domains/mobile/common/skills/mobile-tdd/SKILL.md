---
name: mobile-tdd
description: モバイル向けTDD。UIテスト、インテグレーションテストの実践。全モバイルフレームワーク共通。
dependencies:
  - core/skills/tdd-principles
---

# モバイルTDD

モバイルアプリケーション向けのテスト駆動開発。
**core/tdd-principlesの原則を前提**とし、モバイル固有の実践を定義。

---

## モバイルテストピラミッド

```
        /\
       /  \      E2E（実機/シミュレータ）
      /----\     少数、クリティカルパスのみ
     /      \
    /        \   Widget/Component Test
   /----------\  UIコンポーネントの動作
  /            \
 /              \ Unit Test
/________________\ ビジネスロジック、ユーティリティ
```

---

## テストカテゴリ

### 1. Unit Test

| 対象 | 例 |
|------|-----|
| ユーティリティ関数 | 日付フォーマット、バリデーション |
| ビジネスロジック | 計算、状態遷移 |
| データ変換 | JSON→Model |

### 2. Widget/Component Test

| 対象 | 例 |
|------|-----|
| UIコンポーネント | ボタン、カード、リスト |
| 画面 | ログイン画面、リスト画面 |
| インタラクション | タップ、入力、スクロール |

### 3. Integration Test

| 対象 | 例 |
|------|-----|
| 画面遷移 | ログイン→ホーム |
| データフロー | 入力→API→表示 |
| E2Eシナリオ | ユーザー登録フロー |

---

## モバイル固有の考慮点

### 1. 状態管理のテスト

```
テスト対象:
- 初期状態
- ユーザー操作後の状態
- エラー状態
- ローディング状態
```

### 2. 非同期処理のテスト

```
考慮点:
- API呼び出しのモック
- タイムアウト
- エラーハンドリング
```

### 3. ナビゲーションのテスト

```
テスト対象:
- 画面遷移
- 戻る操作
- ディープリンク
```

---

## モック戦略

### モックすべき

| 対象 | 理由 |
|------|------|
| API通信 | ネットワーク依存排除 |
| 外部サービス | 認証、決済等 |
| デバイス機能 | カメラ、GPS等 |
| 現在時刻 | 再現性確保 |

### モックすべきでない

| 対象 | 理由 |
|------|------|
| 自前のビジネスロジック | 実際の動作を確認 |
| ナビゲーションロジック | フレームワーク依存 |

---

## テストデータ

### ファクトリパターン

```
// テスト用データを生成するファクトリ
createTestUser({
  name: "Test User",
  email: "test@example.com"
})

createTestProduct({
  price: 1000
})
```

### フィクスチャ

```
// JSON形式のテストデータ
test_data/
├── users.json
├── products.json
└── orders.json
```

---

## テストカバレッジ目安

| 層 | カバレッジ目標 |
|----|---------------|
| ビジネスロジック | 90%+ |
| UIコンポーネント | 70%+ |
| Integration | クリティカルパス100% |

---

## 次のステップ

フレームワーク固有の実装は以下を参照:
- `domains/mobile/flutter/skills/flutter-tdd` - Flutter固有
- `domains/mobile/expo/skills/expo-tdd` - Expo固有
- `domains/mobile/react-native/skills/rn-tdd` - RN固有
