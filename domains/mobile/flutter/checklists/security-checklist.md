# セキュリティチェックリスト

## 認証・認可

### 認証
- [ ] 安全な認証方式（OAuth 2.0 / JWT）を使用
- [ ] トークン有効期限が設定されている
- [ ] リフレッシュトークンが安全に管理されている
- [ ] ログアウト時にトークンを無効化
- [ ] 生体認証オプション（必要に応じて）

### 認可
- [ ] サーバー側で権限チェック
- [ ] クライアント側のみの認可に依存しない
- [ ] 最小権限の原則を適用

---

## データ保護

### ストレージ
- [ ] 機密データはflutter_secure_storageで保存
- [ ] SharedPreferencesに機密情報を保存しない
- [ ] APIキーをハードコードしない
- [ ] ローカルDBを暗号化（必要に応じて）

### 通信
- [ ] 全通信がHTTPS（TLS 1.2+）
- [ ] Certificate Pinning実装
- [ ] 中間者攻撃対策

### ログ
- [ ] 機密情報をログ出力しない
- [ ] 本番環境でdebug logを無効化
- [ ] クラッシュレポートに機密情報なし

---

## コード保護

### 難読化
- [ ] リリースビルドで--obfuscate有効
- [ ] --split-debug-info設定
- [ ] ProGuard/R8設定（Android）

### デバッグ
- [ ] 本番ビルドにデバッグコードなし
- [ ] assert()は本番で無効化される
- [ ] 開発者メニュー/バックドアなし

---

## 入力検証

- [ ] 全ユーザー入力をサニタイズ
- [ ] サーバー側でも入力検証
- [ ] SQLインジェクション対策（パラメータ化クエリ）
- [ ] XSS対策（WebView使用時）
- [ ] パストラバーサル対策

---

## 依存関係

- [ ] 脆弱性のある依存パッケージなし（`flutter pub outdated`確認）
- [ ] サードパーティパッケージの信頼性確認
- [ ] 定期的な依存関係更新

---

## プラットフォーム固有

### Android
- [ ] android:debuggable="false"（リリース）
- [ ] android:allowBackup="false"または暗号化バックアップ
- [ ] 適切なパーミッション設定
- [ ] ネットワークセキュリティ設定

### iOS
- [ ] NSAppTransportSecurityが適切
- [ ] キーチェーンアクセスグループ設定
- [ ] 適切なエンタイトルメント

---

## インシデント対応準備

- [ ] クラッシュレポート設定（Firebase Crashlytics等）
- [ ] リモートキル/強制アップデート機構
- [ ] 秘密情報ローテーション手順
- [ ] インシデント対応計画

---

## 監査

- [ ] セキュリティレビュー実施
- [ ] ペネトレーションテスト（必要に応じて）
- [ ] OWASP Mobile Top 10確認
